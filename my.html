<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1,user-scalable=no">
<link rel="stylesheet" href="style/style.css">
<title>数据统计-九江移动校园宽带登记</title>
</head>
<body id="bd_index">
<style>
.my #school + .frm-box .btn {
	text-align:left;
}
.my #school + .frm-box .btn>em {padding-left:16px;}
</style>
<div id="wrapper">
	<header id="header" class="dark noBack center">
		<h1>九江移动校园宽带登记数据统计</h1>
	</header>
    <div id="main" class="my">
    	<form>
			<div class="frm-boxs wide">
				<fieldset class="line-title"><legend>城市</legend></fieldset>
				<div class="frm-box col">
					<div class="frm-box-bd">
						<div class="btn-box col2">
							<label class="btn"><input type="radio" name="rd_city" value="1" checked><em>九江</em></label>
							<label class="btn"><input type="radio" name="rd_city" value="2"><em>共青城</em></label>
						</div>
					</div>
				</div>
				<fieldset class="line-title" id="school"><legend>学校</legend></fieldset>
				<div class="frm-box col">
					<div class="frm-box-bd">
						<div class="btn-box s_list_1">
							<label class="btn"><input type="radio" name="rd_school" value="江西财经职业学院"><em>江西财经职业学院</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江职业大学（老校区）"><em>九江职业大学（老校区）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江学院(庐峰校区）"><em>九江学院(庐峰校区）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江学院(浔东校区)"><em>九江学院（浔东校）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江学院（本部）"><em>九江学院（本部）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江职业大学（新校区）"><em>九江职业大学（新校区）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江职业技术学院（老校区）"><em>九江职业技术学院（老校区）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江职业技术学院（濂溪新校区）"><em>九江职业技术学院（濂溪新校区）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江学院（八里湖）"><em>九江学院（八里湖）</em></label>
							<label class="btn"><input type="radio" name="rd_school" value="九江科技中专"><em>九江科技中专</em></label>
						</div>
						<div class="btn-box s_list_2">
							<label class="btn"><input type="radio" name="rd_school" value="江西师大"><em>江西师大</em></label>
						</div>
					</div>
				</div>
				<fieldset class="line-title" id="building"><legend>楼栋</legend></fieldset>
				<div class="frm-box col">
					<div class="frm-box-bd">
						<div class="btn-box col4">
							<label class="btn"><input type="radio" name="rd_building" value="北1"><em>北1</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北2"><em>北2</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北3"><em>北3</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北4"><em>北4</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北5"><em>北5</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北6"><em>北6</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北7"><em>北7</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="北8"><em>北8</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南1"><em>南1</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南2"><em>南2</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南3"><em>南3</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南4"><em>南4</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南5"><em>南5</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南6"><em>南6</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南7"><em>南7</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="南8"><em>南8</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="东1"><em>东1</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="东2"><em>东2</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="东3"><em>东3</em></label>
							<label class="btn"><input type="radio" name="rd_building" value="东4"><em>东4</em></label>
						</div>
					</div>
				</div>
				<fieldset class="line-title" id="floor"><legend>楼层</legend></fieldset>
				<div class="frm-box col">
					<div class="frm-box-bd">
						<div class="btn-box col4">
							<label class="btn"><input type="radio" name="rd_floor" value="1"><em>1</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="2"><em>2</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="3"><em>3</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="4"><em>4</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="5"><em>5</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="6"><em>6</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="7"><em>7</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="8"><em>8</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="9"><em>9</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="10"><em>10</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="11"><em>11</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="12"><em>12</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="13"><em>13</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="14"><em>14</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="15"><em>15</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="16"><em>16</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="17"><em>17</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="18"><em>18</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="19"><em>19</em></label>
							<label class="btn"><input type="radio" name="rd_floor" value="20"><em>20</em></label>
						</div>
					</div>
				</div>
				<fieldset class="line-title" id="contact"><legend>联系方式</legend></fieldset>
				<div class="frm-box">
					<div class="frm-box-hd">
						<label class="frm-title">地址信息</label>
					</div>
					<div class="frm-box-bd">
						<em class="val address"></em>
						<input type="hidden" name="address">
					</div>
				</div>
				<div class="frm-box">
					<div class="frm-box-hd">
						<label class="frm-title">房间号</label>
					</div>
					<div class="frm-box-bd">
						<input type="text" name="room" class="com-input room" placeholder="点此输入" />
					</div>
				</div>
				<div class="frm-box">
					<div class="frm-box-hd">
						<label class="frm-title">姓名</label>
					</div>
					<div class="frm-box-bd">
						<input type="text" name="name" class="com-input name" placeholder="点此输入" />
					</div>
				</div>
				<div class="frm-box">
					<div class="frm-box-hd">
						<label class="frm-title">手机号</label>
					</div>
					<div class="frm-box-bd">
						<input type="number" name="phone" class="com-input phone" placeholder="点此输入" />
					</div>
				</div>
				<div class="frm-box">
					<div class="frm-box-hd">
						<label class="frm-title">短信验证码</label>
					</div>
					<div class="frm-box-bd">
						<input type="number" name="smscode" class="com-input smscode" placeholder="输入短信验证码" />
					</div>
					<a class="btn code"><em>获取验证码</em></a> 
				</div>
			</div>
			<div class="frm-action">
				<button type="button" class="btn submit"><em>确认登记</em></button>
			</div>
		</form>
    </div>
</div>
<script src="js/jquery.min.js"></script>
<script>


$("[name='rd_city']").on("click",function(){
	if($(this).val()==2){
		$(".s_list_1").addClass("dis_0");
		$(".s_list_2").addClass("dis_1");
	}else{
		$(".s_list_1").removeClass("dis_0");
		$(".s_list_2").removeClass("dis_1");
	}
	$("[name='rd_school']").prop('checked',false);
	$("[name='rd_building']").prop('checked',false);
	$("[name='rd_floor']").prop('checked',false);
	$(".val.address").text("");
});

$("[name='rd_school']").on("click",function(){
	$("[name='rd_building']").prop('checked',false);
	$("[name='rd_floor']").prop('checked',false);	
	$(".val.address").text($(this).val());
	scrolls("#building");
});

$("[name='rd_building']").on("click",function(){
	$("[name='rd_floor']").prop('checked',false);
	if($("[name='rd_school']:checked").val()==undefined){
		scrolls("#school");
		showTip("请先选中学校！","toast");
		return false;
	}else{
		$(".val.address").text($("[name='rd_school']:checked").val()+"，"+$(this).val()+"栋");
		scrolls("#floor");
	}	
});
$("[name='rd_floor']").on("click",function(){
	if($("[name='rd_building']:checked").val()==undefined){
		scrolls("#building");
		showTip("请先选中楼栋！","toast");
		return false;
	}else{
		$(".val.address").text($("[name='rd_school']:checked").val()+"，"+$("[name='rd_building']:checked").val()+"栋，"+$(this).val()+"层");
		$("[name='address']").val($(".val.address").text());
		scrolls("#contact");
	}	
});

function scrolls(el,time){
	var str=el.substr(1);
	var _top=document.getElementById(str).offsetTop
	if(time==""){time=1500}
	$('#main').animate({
		scrollTop:_top-68
	},time);
}

//表单提交判断
var phoneRule=/^1[3-8]\d{9}$/,
	codeRule=/^\d{6}$/;
$(".btn.submit").on("click",function(){
	if($("[name='rd_school']:checked").val()==undefined){
		showTip("请选择学校！","toast");
		return false;
	}else if($("[name='rd_building']:checked").val()==undefined){
		showTip("请选择楼栋！","toast");
		return false;
	}else if($("[name='rd_floor']:checked").val()==undefined){
		showTip("请选择楼层！","toast");
		return false;
	}else if(($("input.room").val()=="")){
		$("input.room").parents(".frm-box").addClass("err");	
		$("input.room").on("keyup",function(){	
			$("input.room").parents(".frm-box").removeClass("err");
		});
		showTip("请输入房间号！","toast");
		$("input.room").focus();
		return false;
	}else if(($("input.phone").val()=="")||(!phoneRule.test($("input.phone").val()))){
		$("input.phone").parents(".frm-box").addClass("err");
		$("input.phone").on("keyup",function(){	
			if(phoneRule.test($("input.phone").val())){
				$("input.phone").parents(".frm-box").removeClass("err");
			}else {
				$("input.phone").parents(".frm-box").addClass("err");
			}
		});
		showTip("输入正确的手机号码！","toast");
		$("input.phone").focus();
		return false;	
	}else if(($("input.smscode").val()=="")||(!codeRule.test(($("input.smscode").val())))){
		$("input.smscode").parents(".frm-box").addClass("err");		
		$("input.smscode").on("keyup",function(){
			if(codeRule.test($("input.smscode").val())){
				$("input.smscode").parents(".frm-box").removeClass("err");
			}else {
				$("input.smscode").parents(".frm-box").addClass("err");
			}
		});		
		showTip("输入正确的短信验证码！","toast");
		$("input.smscode").focus();
		return false;
	}
	window.location.href="reg_ok.html"; 
});

//发送短信验证码
$(".btn.code").on("click",function(){		
	var valPhone=$("input.phone").val();
	if((valPhone=="")||(!phoneRule.test($("input.phone").val()))){	
		$("input.phone").parents(".frm-box").addClass("err");				
		$("input.phone").on("keyup",function(){
			if(phoneRule.test($("input.phone").val())){
				$("input.phone").parents(".frm-box").removeClass("err");
			}
		});
		showTip("输入正确的手机号码！","toast");
		return false;
	}else{
		sysSecond=30; 
		$(this).addClass("count-down");
		InterValObj=window.setInterval(SetRemainTime,1000);
		$("input.phone").attr("disabled",true);
	}
});

//倒计时
function SetRemainTime(){
	if (sysSecond>0) {
		sysSecond=sysSecond-1; 
		$(".count-down>em").text(sysSecond+" 秒");
	}else{
		window.clearInterval(InterValObj);
		$(".btn.code").removeClass("count-down");
		$(".btn.code>em").text("获取验证码");
		$("input.phone").attr("disabled",false);
	}
}

//信息提示
function showTip(tip,position,el,time){
	if(!el){el=$("body");}
	if(!time){time=1600;}
	el.children(".com-tip").remove();
	el.append("<div class='com-tip "+position+"'>"+tip+"</div>");
	if(position=="toast"){
		el.children(".com-tip").fadeIn(600)
	}else{
		el.children(".com-tip").slideDown(300);
	}
	var tipTimer;
	clearTimeout(tipTimer);
	tipTimer=setTimeout(function(){
		if(position=="toast"){
			el.children(".com-tip").fadeOut(600)
		}else{
			el.children(".com-tip").slideUp(300);
		}
	},time);
}
</script>
</body>
</html>
